<head>

    <title>Puzzle Social Network</title>

    <link rel="stylesheet" href="HomepageView/homepageView.css">

</head>

<body>

<!-- NB: Devo ottimizzare il sistema NG-IF con una funzione già realizzata 1 volta -->
<!--     anzichè richiamarla N volte, in modo tale da ottimizzare il sistema       -->
<!--                                                               [ Peppe ]       -->

    <!-- BOX -->
    <div class="container-fluid">
        <div class="row">
             <div class="box">

                <div class="row profilo">

                    <!-- IMMAGINE DEL PROFILO -->
                    <div class="col-md-4 header-left">

                        <!-- AVATAR DI BASE GENITORE - UOMO -->
                        <img src="../Puzzle-code/images/avatars/AvatarGenitore_uomo.png" class="media-object img-thumbnail img-profilo"
                             alt="GENITORE MASCHIO" ng-if="utenteRegistrato.user.ruolo === 'GENITORE' &&  utenteRegistrato.user.sesso === 'M' && utenteRegistrato.user.urlFoto === 'no'">

                        <!-- AVATAR DI BASE GENITORE - DONNA -->
                        <img src="../Puzzle-code/images/avatars/AvatarGenitore.png" class="media-object img-thumbnail img-profilo"
                             alt="GENITORE MASCHIO" ng-if="utenteRegistrato.user.ruolo === 'GENITORE' &&  utenteRegistrato.user.sesso === 'F' && utenteRegistrato.user.urlFoto === 'no'">

                        <!-- AVATAR DI BASE INSEGNANTE - DONNA -->
                        <img src="../Puzzle-code/images/avatars/AvatarInsegnante.png" class="media-object img-thumbnail img-profilo"
                             alt="INSEGNANTE" ng-if="utenteRegistrato.user.ruolo === 'INSEGNANTE' &&  utenteRegistrato.user.sesso === 'F' && utenteRegistrato.user.urlFoto === 'no'">

                        <!-- AVATAR DI BASE INSEGNANTE - UOMO -->
                        <img src="../Puzzle-code/images/avatars/AvatarInsegnante_uomo.png" class="media-object img-thumbnail img-profilo"
                             alt="INSEGNANTE" ng-if="utenteRegistrato.user.ruolo === 'INSEGNANTE' &&  utenteRegistrato.user.sesso === 'M' && utenteRegistrato.user.urlFoto === 'no'">

                        <!-- FOTO PROFILO CARICATA DA UTENTE -->
                        <img src="{{utenteRegistrato.user.urlFoto}}" class="media-object img-thumbnail img-profilo"
                             alt="INSEGNANTE" ng-if="utenteRegistrato.user.urlFoto != 'no'">

                        <button ng-click="" data-toggle="modal" data-target="#aggiungiFoto">Modifica Foto Profilo</button>
                    </div>
                    <!-- FINE IMMAGINE DEL PROFILO -->


                    <!-- INFO PERSONALI -->

                    <div class="col-md-8 header-right">
                        <!-- NOME E COGNOME UTENTE -->
                        <h1> {{utenteRegistrato.user.nome}} {{utenteRegistrato.user.cognome}} </h1>
                        <!-- FINE NOME E COGNOME    -->


                        <!-- INTESTAZIONE SONO UN INSEGNANTE DI --->
                        <h6 ng-if = "utenteRegistrato.user.ruolo === 'INSEGNANTE'"> Insegnante di {{utenteRegistrato.user.materia}}  </h6>
                        <!-- FINE INTESTAZIONE SONO UN INSEGNANTE DI--->

                        <!-- INTESTAZIONE SONO IL GENITORE DI --->
                        <h6 ng-if = "utenteRegistrato.user.ruolo === 'GENITORE'"> Genitore di {{utenteRegistrato.user.figlio1.nomeFiglio}}
                            {{utenteRegistrato.user.figlio1.cognomeFiglio}} </h6>
                        <!-- FINE INTESTAZIONE SONO il genitore DI--->

                        <!-- INIZIO ELENCO INFORMAZIONI PERSONALI --->
                        <ul class="informazioniPersonali">

                            <!-- CITTA' --->
                            <li class="row informazioniPersonali-text">
                                <div class="col-lg-4">
                                    <i> <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-731-puzzle.png" height="22" width="22"/> </i>                                        &thinsp;
                                    <b> CITTA'</b>
                                </div>
                                <div class="col-lg-8">
                                    {{utenteRegistrato.user.citta}}
                                </div>
                            </li>
                            <!-- FINE CITTA' --->

                            <!-- SCUOLA INSEGNANTE -->
                            <li class="row informazioniPersonali-text" ng-if = "utenteRegistrato.user.ruolo === 'INSEGNANTE'">
                                <div class="col-lg-4">
                                    <i> <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-731-puzzle.png" height="22" width="22"/> </i>                                        &thinsp;
                                    <b> SCUOLA </b>
                                </div>
                                <div class="col-lg-8">
                                    {{utenteRegistrato.user.scuola}}
                                </div>
                            </li>
                            <!-- FINE SCUOLA -->

                            <!-- SCUOLA GENITORE -->
                            <li class="row informazioniPersonali-text" ng-if = "utenteRegistrato.user.ruolo === 'GENITORE'">
                                <div class="col-lg-4">
                                    <i> <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-731-puzzle.png" height="22" width="22"/> </i>                                        &thinsp;
                                    <b> SCUOLA </b>
                                </div>
                                <div class="col-lg-8">
                                    {{utenteRegistrato.user.figlio1.scuolaFiglio}}
                                </div>
                            </li>
                            <!--FINE SCUOLA -->

                            <!-- CLASSE INSEGNANTE --->
                            <li class="row informazioniPersonali-text" ng-if = "utenteRegistrato.user.ruolo === 'INSEGNANTE'">
                                <div class="col-lg-4">
                                    <i> <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-731-puzzle.png" height="22" width="22"/> </i>                                        &thinsp;
                                    <b> CLASSE </b>
                                </div>
                                <div class="col-lg-8">
                                    {{utenteRegistrato.user.classe}}
                                </div>
                            </li>
                            <!-- FINE CLASSE --->

                            <!-- CLASSE GENITORE --->
                            <li class="row informazioniPersonali-text" ng-if = "utenteRegistrato.user.ruolo === 'GENITORE'">
                                <div class="col-lg-4">
                                    <i> <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-731-puzzle.png" height="22" width="22"/> </i>                                        &thinsp;
                                    <b> CLASSE </b>
                                </div>
                                <div class="col-lg-8">
                                    {{utenteRegistrato.user.figlio1.classeFiglio}}
                                </div>
                            </li>
                            <!--FINE CLASSE --->

                            <!-- SEZIONE INSEGNANTE --->
                            <li class="row informazioniPersonali-text" ng-if = "utenteRegistrato.user.ruolo === 'INSEGNANTE'">
                                <div class="col-lg-4">
                                    <i> <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-731-puzzle.png" height="22" width="22"/> </i>                                        &thinsp;
                                    <b> SEZIONE </b>
                                </div>
                                <div class="col-lg-8">
                                    {{utenteRegistrato.user.sezione}}
                                </div>
                            </li>
                            <!-- FINE SEZIONE  --->

                            <!-- SEZIONE GENITORE --->
                            <li class="row informazioniPersonali-text" ng-if = "utenteRegistrato.user.ruolo === 'GENITORE'">
                                <div class="col-lg-4">
                                    <i> <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-731-puzzle.png" height="22" width="22"/> </i>                                        &thinsp;
                                    <b> SEZIONE </b>
                                </div>
                                <div class="col-lg-8">
                                    {{utenteRegistrato.user.figlio1.sezioneFiglio}}
                                </div>
                            </li>
                            <!-- FINE SEZIONE  --->

                        </ul>
                    </div>
                    <!-- FINE INFORMAZIONI PERSONALI -->


                </div>
            </div>
        </div>
    </div>


    <!-- ---------------------------------------------------------------------------------------------------- -->

    <!-- ------------------------------------------ -->
    <!-- SEZIONE MATERIALE DIDATTICO | INSEGNANTE | -->
    <!-- ------------------------------------------ -->

    <div class="materialeD" ng-if = "utenteRegistrato.user.ruolo === 'INSEGNANTE'">
        <p> Materiale Didattico </p> <br>

        <button class="btn" data-toggle="modal" data-target="#aggiungiFile">
            <i class="glyphicon glyphicon-plus-sign"></i> &nbsp; Carica un nuovo file
        </button>

        <div ng-if="flag">Non hai ancora caricato materiale didattico</div>

        <div class="container-fluid" ng-repeat="elemento in elencoFile | filter: {'creatore' : IDLoggato} : true">

            <div class="row">
                <div class="line"> </div>

                <div class="col-lg-8 media-list">
                    <div class="media-left">
                        <!-- CONTROLLO IMMAGINE/FOTO -->
                        <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-12-camera.png" ng-if="immagine(elemento.tipo) === 'img'"/>
                        <!-- CONTROLLO PDF -->
                        <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-30-notes-2.png" ng-if="immagine(elemento.tipo) === 'pdf'"/>
                        <!-- CONTROLLO MUSICA -->
                        <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-18-music.png" ng-if="immagine(elemento.tipo) === 'music'"/>
                        <!-- CONTROLLO VIDEO -->
                        <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-9-film.png" ng-if="immagine(elemento.tipo) === 'video'"/>
                        <!-- CONTROLLO ZIP -->
                        <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-326-wallet.png" ng-if="immagine(elemento.tipo) === 'zip'"/>
                        <!-- FILE GENERICO -->
                        <img src="HomepageView/glyphicons_free/glyphicons/png/glyphicons-63-paperclip.png" ng-if="immagine(elemento.tipo) === 'other'"/>
                    </div>
                    <div class="media-body">
                        &nbsp; {{elemento.titolo}}
                    </div>
                </div>

                <div class="col-lg-4">
                    <a href='{{elemento.url}}' target=”_blank”>
                        <button type="button">
                            <i class="glyphicon glyphicon-download"></i> Scarica
                        </button>
                    </a>
                    <button type="button" ng-click="deleteFile(elemento)" data-toggle="modal" data-target="#elimina">
                        <i class="glyphicon glyphicon-trash"></i> Elimina
                    </button>
                </div>

            </div>
        </div>
    </div>


    <!-- MODAL: AGGIUNGI FILE -->
    <div class="modal fade" id="aggiungiFile" role="dialog">
        <div class="modal-dialog modal-sm">

            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Caricamento nuovo file</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <form class="inputCaricamentoFile" role="form"> <!-- ho cancellato  id="uploadFile" perchè era inutile e dava errore perchè messo in più parti!-->
                            <!-- TITOLO -->
                            <input  type="text" class="form-control" id="txtNome" placeholder="Inserisci Titolo" name="titolo"
                                   ng-model="dati.titolo" required/>
                            <!-- ----------------------- -->
                            <div class="inputCaricamentoFile" ng-show="!isUploading">
                                <input id="sceglifile" type="file" onchange="angular.element(this).scope().select(this)" required>
                            </div>
                            <!-- ----------------------- -->
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn" ng-click="upload()" data-dismiss="modal" >Carica</button> <!--ho cancellato id="submit" nel bottone Carica perchè non serviva a nulla e dava errore perchè messo in più parti!!!-->
                    <button type="button" class="btn" data-dismiss="modal">Annulla</button>
                </div>
            </div>
        </div>
    </div>


    <!-- MODAL: ELIMINA -->
    <div class="modal fade" id="elimina" role="dialog">
        <div class="modal-dialog">

            <div class="modal-content">

                <div class="modal-header" >
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Elimina file</h4>
                </div>
                <div class="modal-body">
                    <p><em>Sei sicuro di voler rimuovere definitivamente "<b>{{fileDaEliminare.titolo}}</b>"?</em></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" data-dismiss="modal" ng-click="confirmDeleteFile(fileDaEliminare)">Elimina</button>
                    <button type="button" class="btn" data-dismiss="modal">Annulla</button>
                </div>

            </div>
        </div>
    </div>

    <!-- MODAL: AGGIUNGI FOTO PROFILO -->
    <div class="modal fade" id="aggiungiFoto" role="dialog">
        <div class="modal-dialog modal-sm">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title"> Modifica Foto Profilo</h4>
                </div>

                <div class="modal-body">
                    <div class="form-group">
                        <form id="uploadFile" role="form"> <!-- ho cancellato  id="uploadFile" perchè era inutile e dava errore perchè messo in più parti!-->

                            <!-- ----------------------- -->
                            <div ng-show="!isUploading">
                                <input type="file" onchange="angular.element(this).scope().select(this)" required>
                            </div>
                            <!-- ----------------------- -->

                            <p ng-show="flagFoto">File non supportato</p>

                        </form>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn" id="submit" ng-click="uploadFoto()">Carica</button>
                    <button type="button" class="btn" data-dismiss="modal">Annulla</button>
                </div>
            </div>
        </div>
    </div>

    <sidebar user="utenteRegistrato.user.ruolo"></sidebar>

</body>